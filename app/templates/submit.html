{% extends "base.html" %}

{% block title %}Submit a Recipe â€“ Curated Recipes{% endblock %}

{% block content %}
  <h1 class="mb-3 text-center">ðŸ“¤ Submit a Recipe</h1>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} text-center" role="alert">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <form method="POST" id="recipe-form" class="mx-auto" style="max-width: 600px;">
    <div class="mb-3">
      <label for="meal_type" class="form-label">Meal Type</label>
      <select class="form-select" name="meal_type" id="meal_type" required>
        <option value="">Choose...</option>
        <option value="breakfast">Breakfast</option>
        <option value="lunch">Lunch</option>
        <option value="dinner">Dinner</option>
        <option value="snacks">Snacks</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="name" class="form-label">Recipe Name</label>
      <input type="text" class="form-control" name="name" id="name" required>
    </div>

    <div class="mb-3">
      <label for="link" class="form-label">Recipe Link</label>
      <input type="url" class="form-control" name="link" id="link" required>
    </div>

    <button type="submit" class="btn recipe-btn">Submit Recipe</button>
  </form>
{% endblock %}

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("recipe-form");
    const alerts = document.querySelectorAll(".alert-success");

    if (alerts.length > 0 && form) {
      // If there's a success alert, clear the form
      form.reset();
    }
  });
</script>
